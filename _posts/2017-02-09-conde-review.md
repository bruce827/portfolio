---
layout: post
title: "前端代码review"
date: 2015-02-09 19:33:48
image: '/assets/img/dica-rapida-2/main.png'
description: '在大多数时候，维护实习生的代码真的不如自己重构一下。'
main-class: 'html'
color: '#EB7728'
tags:
- UI
- 模板
- 前端
categories:
twitter_text: 'Aprenda a usar as meta tags sociais.'
introduction: ""
---
## 写在前面
在初创型团队，是否进行代码review其实是一个鱼和熊掌的问题，如果甲方没有强制要求执行，开发团队往往为了完成时间节点来尽量简化除实现功能以外的任何活动，因为大多时候既然没有要求，就也不会给出响应的时间成本来做。如果是做产品，产品经理一定要为团队争取到代码review的时间。
* 保证代码质量
* 避免提交版本遗漏
* 提高编码能力  

## 复盘方案
0.复盘之前一定要进行代码自查。  
1.定期或定节点组织，进行新老分组，如果是外包团队则由负责人参加。  
2.负责人需要事先整理出每个模块的核心逻辑，在review的时候由开发人员对所有人讲解，必要时可以配合流程图。  
3.在开发计划中要排出时间，一般采取开发人员集体参加的模式，只讲核心模块的核心代码，控制时间为1-2个小时。
## 复盘主要内容  
### 基础项
1. 功能是否完全实现，敏捷模式可参考storyCard，CMMI模式可参考prd或原型。
> 无论以哪个作为参考，在需求评审时候一定要确认唯一性，因为到后期业务人员很难保证所有的参照都及时更新。  

2. 在一些常规项上，是否使用了公共组件。  
3. 代码是否符合团队的编码规范（一般来讲每个团队都有自己的编码规范，如果没有，需要在开发启动之前制定）。   
4. 去掉打断被注释掉的代码，如果是业务变更要在注释中写明。  
5. 是否会出现死循环或明显逻辑错误。  
6. 是否对提交、保存等按钮进行了防抖处理（通常最简便的方案是加入全局loading）。  
7. 针对不同的框架，代码的位置是否正确，尤其是API调用层，通常都有专门的service层。   
8. 重要的对象是否都做了容错和默认值处理。  

### 安全与性能

1. 输入项文档对照检查，无论后台是否做校验，前台都必须校验。  
2. 发布时是否清除了log与敏感注释，比如用户信息字段等等。  
3. 在50并发的前提下，简单查询2.6秒以内，复杂查询（统计、汇总、分析等）7秒以内。  
4. 一般来讲组件的套嵌不要超过3层。
5. 是否保证了单一数据源和单向数据流。

### 过程文档

1. 特殊公共组件是否有readme，且是否在更改后进行了更新。
2. 不常使用的第三方开源库是否有文档，和必要的代码意图注释。  
3. 完成的代码应删除TODO项（PSM可能会根据todo项来预估项目开发是否会延期）。  

## 使用GitLab Merge Request操作步骤
1. 编写代码并将其推送到单独的分支。
2. 为主要开发分支创建合并请求。Assignee以及说明字段和评论中被提到的那些人将通过电子邮件通知合并请求。如果需要某一位开发人员关注，你可以在描述字段中@该名开发人员。
3. 等到MR被接受或拒绝，并提供有关必要修复的评论。
4. 参与有关修复的讨论。 （GitLab允许回复评论）
5. 修复。
6. 将更改推送到你的分支。
7. 打开一个新合并如果最后一个MR被关闭（如果合并请求未关闭，它将自动更新，直到最后一次提交为止）。
8. 通过注释合并请求或以其他方式报告已实施的修复。
