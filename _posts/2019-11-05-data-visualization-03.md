---
layout: post
comments: true
title: "3.美化你的图表-柱状图"
date: 2019-11-05 03:44:01
image: '/assets/img/dataAnalyze/'
description: 在了解了一些统计学常识的问题以后，我们终于可以开始课程了
main-class: 'svg'
color:
tags:
- 柱状图
- 数据可视化
- 图表美化
categories:
- 数据可视化
twitter_text:
introduction: 为了沈佳能更好的上手操作，我决定将工具限定为excle和平面制图工具
---

## 美化图表大纲
1. 柱状图
2. 饼图
3. 箱线图
4. 折线图
5. 散点图
6. 热力图  

## 为了美观，是否需要立体的表现形式
立体图不是不可以有，除非你可以做成这样：
![好看的立体图]({{"03/3Dchart.jpg" | prepend: page.image | prepend: site.baseurl}})

## 柱状图的定义
柱状图是针对离散型数据（比如性别）所做的统计图。每根柱子代表一个类别（男性或者女性），柱子的高度是这个类别的频数（男性或者女性有多少人），有时候也是百分比。首先展示一个中规中矩的柱状图：
![中规中矩的柱状图]({{"03/bar-demo.png" | prepend: page.image | prepend: site.baseurl}})
一个柱状图要有如下信息：
1. 要有图标题，一般在图的下方，标题要简洁明了。同时，报告中的统计图要有标号。
2. 横轴和纵轴要标注清楚（横轴：职称；纵轴：频数）。如果有单位的话，需要注明。
3. 图的标题、横轴、纵轴等，出现的文字要统一和准确，不要一会儿中文，一会儿英文。写中文报告，就都标注中文。
4. 图的比例要协调，别太胖别太瘦，别太高也别太矮（约等于没说）。
5. 图的内容要正确、简明，避免出现不必要的标签、背景等。
6. 注意图的配色。不要精挑细选一组非常难看的配色,有的时候“越用心越丑陋”，在你没有一些审美的时候最好使用一些配色推荐网站的建议。
7. 画完图要有适当的评述，尤其是在报告里，这点非常重要。  

> 数据可视化是为了表达观点，所以你在任何位置的图表必然是有意义且为主题服务的。  

## 说一些常见的错误
### 越用心越丑陋
![一张丑图]({{"03/bar-ugly.jpg" | prepend: page.image | prepend: site.baseurl}})
这是一个看脸的时代，在同等说服力的情况下，一张好看的图必然会更加吸引观众的眼球。我并没有为了突出主题而刻意挑选或者丑化图表，这些都是我在网上找到的。首先我要说的是这张图做的已经是符合大多数用户的眼光了，但是不要忘了数据可视化的宗旨，下面我依照这个图提几个思考题：
1. 这张图要表达的观点是什么？能否一眼就看出。
2. 为啥要用立体的表现形式。
3. 2005年和2006年哪年的数据增幅大。  
不得不说这张图的作者一定用心了，但是作者花了大多时间在样式的渲染上，而忽略了数据的直观表达。  

### 在数据本身不好的时候，要学会“带着手铐和脚镣跳舞”
![又一张丑图]({{"03/ugly-bar2.png" | prepend: page.image | prepend: site.baseurl}})
我们暂且不说色彩的搭配问题，也不聊监控密度和监控数量的业务关系，单单从最直观的展现来看，我完全不知道这张图作者要表达什么信息，柱子有高有低也没有进行排序，可能你的理由是“数据本身就这样，我能有什么办法？”这就是我要说的问题，数据可视化是要求作者根据数据来表达观点，并没有约束你一定要用什么展现形式，选择图表的展现形式是门学问，这里我简单说几点：  
1. 无论业务逻辑是怎样，柱子高低要进行排序。
2. 很明显，两个因变量都是离散型数据，那为啥密度就要用线连接起来。
3. 数据太小时候要固定最小高度，并加以说明。不然我不知道密度为啥在后面几个地区就没有了。
4. 图中自变量是地区，一定要用柱状图表示吗？有没有更直观的展现形式。  
> 以上两个例子给出的建议都不是绝对的，比如自变量的排序也不一定就是按照观测的由高到低来排序，比如第一张图的年份本身也是一种排序。俗话说的好，世间美的事物都是相似的，丑的事物各有各的丑，其实万变不离其衷，要不断的变换角色，甚至找一些朋友来帮你审视图表。  

## 堆积图的使用
作为柱状图的复杂展现形式，堆积柱状图在展示频数上有其自己的优势，但原理不变，简单的柱状图只涉及到一个离散型的变量（比如性别），而堆积柱状图涉及两个离散型变量（比如性别&职称）。  
下面展示了一组样本数据中，性别和职称交叉频数的柱状图：
![一个标准的堆积图]({{"03/stack-demo.png" | prepend: page.image | prepend: site.baseurl}})
因为有两个离散型变量，柱子可以代表任何一个变量，这样就产生了两种画法。左上角的柱状图，柱子代表职称；右上角的柱状图，柱子代表性别。
也正是因为柱子只能代表一个变量的不同类别，那么另外一个变量的类别只能通过颜色（也有其他手段，颜色最为常见）进行区分。这样就需要一个额外的标签，标注另一个变量的不同类别所对应的颜色。
按照交叉频数的展示手段：是“堆积展示”（左上角）还是“分开展示”（左下角），又会形成两种不同的画法。
于是，同一组数据，可以有四种不同的展示方法。具体采用哪个柱状图，取决于你想给读着传递的信息。比如右上角的柱状图，比起其他三个，能够更直观的传递男性总数多于女性这一信息。

> 堆积柱状图也可以展示一个离散型变量和一个连续型变量，甚至两个连续型变量，前提是将连续型变量离散化，比如将年龄分成若干离散区间。  

> 堆积图的展现形式不太适合在柱子上标注出交叉频数，会显得混乱。

可能你会问了，这样的堆积图如果放在web页面上或者ppt中，会不会显得过于捡漏了。在此基础上，我们可以根据页面整体的样式进行加工，比如改成下面这样：
![改后的图]({{"03/bar-beatuful.png" | prepend: page.image | prepend: site.baseurl}})
在作图时候我考虑以下几点：
* 本着“红男绿女”的原则，选用颜色尽量减亮度加对比度。
* 不显示堆积总数不是因为美观问题，而是考虑到相比之下各分类的数量更有实际意义，添加总数反而会使图表不够直观。  
* 添加y轴辅助线使类目对比更加清晰。

## 柱状图还能表现什么
### 1.展示常用的统计量
假设我手头的样本数据包含1000辆车，四种车型（A、B、C和D）。以往画柱状图，就是展示每种车型各有多少辆车。
现在，有这些车在2015年全年的保养花销，我想比较一下，不同车型的平均花销，看看哪种车型的平均保养费用最高。一般情况下，我们会分车型算四个平均数，用统计表进行展示（统计表里可能还会报告其他统计量）。
作为另一种选择，我们也可以用柱状图进行展示，柱高就是统计量（平均保养花销）的取值，如图1所示（类别不多，可以按照车型排列柱子，也可以按柱子高度排列）。
![车险]({{"03/car.jpeg" | prepend: page.image | prepend: site.baseurl}})
> 千万不要每个统计量都展示一遍，均值、中位数、方差、标准差，一个变量画出好几个柱状图展示不同的统计量。要展示听众最关心的，或者最能讲出故事的那些统计量，做到少而精。  

> 有时候为了使你的数据更有说服力，纵坐标没必要从零开始。

### 2.展示回归分析的系数估计结果
在做回归分析汇报的时候，有时候回归系数很难能让听众一眼就了解你的数据结论，比如像这样一张表：
![模型回归分析]({{"03/all-model.png" | prepend: page.image | prepend: site.baseurl}})
你在ppt上放入这样一张表无论你怎么讲，该听不懂的人一样听不懂，能听懂的人又不用你讲，看一眼就明白了，这个时候柱状图的优势就发挥出来了，你可以在表格下面放一张这样的图进行解释：
![模型回归分析图]({{"03/p-value.png" | prepend: page.image | prepend: site.baseurl}})
在作图的时候我考虑以下几点：  
1. 我用数据颜色映射区分了显著和不显著的系数估计。深色是指系数估计跟0有显著差异，而浅色是指没有。颜色越深越重要。
2. 柱子朝上，说明自变量和因变量的关系是正向的。自变量的取值增加的时候，因变量取值也增加。类似地，如果柱子朝下，说明自变量和因变量的关系是负向的。自变量的取值越大，因变量取值越小。
3. 若对自变量进行了标准化，那么柱子的高度，也就是系数的估计值有可比性，可以直观的区分出自变量对因变量的影响大小。