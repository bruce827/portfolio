---
layout: post
comments: true
title: "工作流设计"
date: 2019-06-27 03:33:14
image: '/assets/img/'
description: 一个大型的OA或后台管理系统都需要强大的工作流管理来支持
main-class: "PM"
color:
tags:
- 审批流
- 工作流
categories:
twitter_text:
introduction:
---

## 应用场景
* 在OA系统中，办公自动化协同是用户首要的工作方式，几乎所有的工作流程都要进行审批流，这时要做到流程清晰，责任明确。
* 而在一般后台管理系统中，不是每个项目都需要有自己的审批流配置，在组织架构明确，流程清晰的项目中，根本没有必要有自己的审批流配置环节。

## 工作流的几个概念
### 案例
每一个案例都要有完整的生命周期，案例从发起到结束的过程中，无论在任何节点都会有自己的状态（状态机），状态由以下三个因素决定：
1. 案例状态属性
在简单的案例中，状态属性可以是一个标识位字段，在复杂案例中，案例的状态可能需要两个以上的字段来判断其状态。
2. 判定规则
规则要具备全面性，比如判断一个金额是正数时候走A流程，金额是负数的时候走B流程。在这里，就缺少了金额为0时候的情况判断。
3. 执行内容
指定具体向下流转的节点。  

### 流程路由
* 顺序
* 并行
* 指定
* 循环  

## 工作流总体框架设计
总的来说，我们会定义三总角色：用户、设计者、管理员，每个角色的权限定义如下：
![工作流架构]({{"/assets/img/PM/work-flow.png" | prepend: site.url }})
 
## 工作流的分类
### 固定流程
任何成熟的行业都会有其自身的固定工作流，其场景、角色节点和路由都是固定的。
### 自定义流程
为了提高效率，在固定流程的基础上新建模板，通过模板添加自定义流程。
## 工作流设计
### 1、表单设计
在工作流引擎中，表单作为数据载体一般要注意以下几点:
- 基本属性  
根据流程的不同，各个表单具有唯一属性，基本上包括表单名称、申请人、所属部门、日期、审批结果、审批意见等。
- 操作类型
首先表单作为一个实体类也必须要具备增删改查的基本操作，除此之外，根据具体需求会增加导入、导出、启用、停用等功能。
### 2、流程设计
- 流水号
为了方便用户设计，流水号应该显示其下一步的操作。
![工作流架构]({{"/assets/img/PM/base-info.png" | prepend: site.url | prepend: site.baseurl}})
- 条件设置  
指业务相关的判断条件，这步骤是做自动化的核心。
其中可以细分为：
1. 待办项最大查看人数限制。
2. 前置规则。
3. 启动规则。
4. 审批人规则。
5. 超时处理规则。
6. 成功规则。
7. 其他规则。

## 案例
![案例]({{"/assets/img/PM/workflow-case.png" | prepend: site.url | prepend: site.baseurl}})